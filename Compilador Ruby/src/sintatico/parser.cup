package sintatico;
import java_cup.runtime.*;




parser code /**CÃ³digo para erros de sintaxe.*/
{:

	

    /**MÃ©todo que Ã© chamado automaticamente antes de um erro de sintaxe.*/
    public void syntax_error(Symbol s){
        System.out.println("Erro na linha " + (s.right+1) +", Coluna "+s.left+ ". ID "
        +s.value + " nÃ£o reconhecido." );
    }

    /**MÃ©todo que Ã© chamado quando nÃ£o Ã© possÃ­vel a recuperaÃ§Ã£o de erros.*/
    public void unrecovered_syntax_error(Symbol s) throws java.lang.Exception{
        System.out.println("Falha na compilaÃ§Ã£o.");
    }
:}


action code
{:
/** Aqui podemos adicionar cÃ³digo JAVA */
:}


/* Aqui espeficicamos os terminais da linguagem. */
terminal BEGIN_MAIUSCULO, ENSURE, ASSERT, SELF, WHEN, END_MAIUSCULO, FALSE, NOT, SUPER, ALIAS, DEFINED, OR, THEN, YIELD , AND, REDO, TRUE,
	ELSE, IN, RESCUE, UNDEF, BREAK, ELSIF, MODULE, RETRY, UNLESS, NEXT, RETURN, BEGIN_MINUSCULO, CLASS, DEF, FOR, WHILE, UNTIL, DO, IF, END_MINUSCULO,
	PARENTESE_ABERTURA, PARENTESE_FECHAMENTO, CHAVE_ABERTURA, CHAVE_FECHAMENTO, COLCHETE_ABERTURA, COLCHETE_FECHAMENTO, MAIS, MENOS, VEZES, BARRA,
	BARRA_BARRA, PORCENTAGEM, MENOR_MENOR, MAIOR_MAIOR, E_COMERCIAL, BARRA_VERTICAL, POTENCIACAO, TIL, MENOR, MAIOR, MENOR_OU_IGUAL, MAIOR_OU_IGUAL,
	IGUAL_IGUAL, DIFERENTE1, DIFERENTE2, ARROBA, VIRGULA, DOIS_PONTOS, PONTO, DOIS_PONTOS2, APOSTROFO, ATRIBUICAO, PONTO_E_VIRGULA, INCREMENTO,
	DECREMENTO, INCREMENTO_MULTIP, INCREMENTO_DIVISAO, INCREMENTO_DIVISAO_DIVISAO, PORCENTAGEM_IGUAL, E_COMERCIAL_IGUAL, BARRA_VERTICAL_IGUAL, PONTENCIACAO_IGUAL,
	MAIOR_MAIOR_IGUAL, MENOR_MENOR_IGUAL, MULTIP_MULTIP_IGUAL, COMENTARIO, NUMERO, IDENTIFICADOR, TIPO2, PUTS, STRING, QUEBRA_DE_LINHA, CASE, VEZES_VEZES;



/*
* Aqui estÃ£o os nÃ£o-terminais

start with program;
*/
non terminal program, codigo, condicao, cod_condicao, expr, arg, variavel, repeticao_for, expr_for, repeticao_while, 
classe, funcao, identificadores_funcao;


/* Precedencias */
precedence left MAIS, MENOS;
precedence left VEZES, BARRA;

/*  Declaracao da gramatica  */

program ::= codigo;
codigo ::= condicao codigo
		| repeticao_for codigo
		| repeticao_while codigo
		| funcao codigo
		| classe codigo		
		| variavel codigo
		| "";

//condicao ::= IF expr QUEBRA_DE_LINHA codigo QUEBRA_DE_LINHA END_MINUSCULO;// Nao funcionando devido ao QUEBRA_DE_LINHA


//Gramaticas Condicao, repeticao_for, repeticao_while, funcao, classe
condicao ::= IF {: System.out.print("if "); :} expr {: System.out.print("\t"); :} codigo {: System.out.println(""); :} cod_condicao END_MINUSCULO {: System.out.println("end"); :};// Funcionando sem o QUEBRA_DE_LINHA

cod_condicao ::= ELSIF {: System.out.print("elsif "); :} expr {: System.out.print("\t"); :} codigo {: System.out.println(""); :} cod_condicao
		|ELSE {: System.out.print("else "); :} {: System.out.print("\t"); :} codigo {: System.out.println(""); :}
		|"";

repeticao_for ::= FOR {: System.out.print("for "); :} expr_for {: System.out.print("\t"); :} codigo {: System.out.println(""); :} END_MINUSCULO {: System.out.println("end"); :};// Tem que ter o espcao entre os dois pontos. Ex.: 0 .. 5

repeticao_while ::= WHILE {: System.out.print("while "); :} expr DO {: System.out.print("\t"); :} codigo {: System.out.println(""); :} END_MINUSCULO {: System.out.println("end"); :};

funcao ::= DEF {: System.out.print("def "); :} IDENTIFICADOR PARENTESE_ABERTURA identificadores_funcao PARENTESE_FECHAMENTO {: System.out.print("\t"); :} codigo {: System.out.println(""); :} END_MINUSCULO {: System.out.println("end"); :};

classe ::= CLASS {: System.out.print("class "); :} IDENTIFICADOR {: System.out.print("\t"); :} codigo {: System.out.println(""); :} END_MINUSCULO {: System.out.println("end"); :} ;


//Gramaticas complementares
expr ::= arg  MAIOR {: System.out.print(" > "); :} arg
		| arg MENOR {: System.out.print(" < "); :} arg
		;
		
expr_for ::= IDENTIFICADOR:id {: System.out.print("" + id); :} IN {: System.out.print(" in "); :} NUMERO:num {: System.out.print("" + num); :} DOIS_PONTOS2 {: System.out.print(" .. "); :} NUMERO:num1 {: System.out.print("" + num1); :};

identificadores_funcao ::= IDENTIFICADOR:id {: System.out.print("" + id); :} VIRGULA {: System.out.print(", "); :} identificadores_funcao
		| IDENTIFICADOR:id {: System.out.print("" + id); :};
		
arg ::= IDENTIFICADOR:id {: System.out.print("" + id); :} |  NUMERO:num {: System.out.print("" + num); :};

variavel ::= IDENTIFICADOR:id {: System.out.print("" + id); :} ATRIBUICAO {: System.out.print(" = "); :} NUMERO:num {: System.out.println("" + num); :} | STRING:str {: System.out.println("" + str); :};





// Expressões matemáticas
/*expre_matematica ::= expressao:e {: System.out.println("Resultado = "+e); :}  pcoma;

expressao ::= expressao:e1 MAIS expressao:e2 {: RESULT = new Integer(e1.intValue()+e2.intValue()); :}
        |expressao:e1 MENOS EXPR:e2 {: RESULT = new Integer(e1.intValue()-e2.intValue()); :}
        |expressao:e1 VEZES EXPR:e2 {: RESULT = new Integer(e1.intValue()*e2.intValue()); :}
        |expressao:e1 BARRA EXPR:e2 {: RESULT = new Integer(e1.intValue()/e2.intValue()); :};              

*/
